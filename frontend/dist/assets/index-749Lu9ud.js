var Ft=Object.defineProperty;var Ut=(e,t,n)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ut=(e,t,n)=>Ut(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();function y(){}function ot(e,t){for(const n in t)e[n]=t[n];return e}function Nt(e){return e()}function bt(){return Object.create(null)}function x(e){e.forEach(Nt)}function ct(e){return typeof e=="function"}function z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function zt(e){return Object.keys(e).length===0}function Tt(e,...t){if(e==null){for(const o of t)o(void 0);return y}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function J(e,t,n){e.$$.on_destroy.push(Tt(t,n))}function Pt(e){return e&&ct(e.destroy)?e.destroy:y}function p(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function Ht(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function O(){return I(" ")}function ht(){return I("")}function et(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function Vt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Jt(e){return Array.from(e.childNodes)}function B(e,t){t=""+t,e.data!==t&&(e.data=t)}function tt(e,t){e.value=t??""}function Kt(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}function rt(e,t){return new e(t)}let K;function V(e){K=e}function lt(){if(!K)throw new Error("Function called outside component initialization");return K}function pt(e){lt().$$.on_mount.push(e)}function Wt(e){lt().$$.after_update.push(e)}function Gt(e){lt().$$.on_destroy.push(e)}function Qt(){const e=lt();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const c=Kt(t,n,{cancelable:o});return r.slice().forEach(u=>{u.call(e,c)}),!c.defaultPrevented}return!0}}function yt(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const X=[],kt=[];let Y=[];const vt=[],qt=Promise.resolve();let ft=!1;function xt(){ft||(ft=!0,qt.then(Mt))}function Rt(){return xt(),qt}function dt(e){Y.push(e)}const at=new Set;let R=0;function Mt(){if(R!==0)return;const e=K;do{try{for(;R<X.length;){const t=X[R];R++,V(t),Zt(t.$$)}}catch(t){throw X.length=0,R=0,t}for(V(null),X.length=0,R=0;kt.length;)kt.pop()();for(let t=0;t<Y.length;t+=1){const n=Y[t];at.has(n)||(at.add(n),n())}Y.length=0}while(X.length);for(;vt.length;)vt.pop()();ft=!1,at.clear(),V(e)}function Zt(e){if(e.fragment!==null){e.update(),x(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(dt)}}function te(e){const t=[],n=[];Y.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),Y=t}const nt=new Set;let T;function mt(){T={r:0,c:[],p:T}}function _t(){T.r||x(T.c),T=T.p}function N(e,t){e&&e.i&&(nt.delete(e),e.i(t))}function P(e,t,n,o){if(e&&e.o){if(nt.has(e))return;nt.add(e),T.c.push(()=>{nt.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Et(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function st(e,t){const n={},o={},r={$$scope:1};let c=e.length;for(;c--;){const u=e[c],i=t[c];if(i){for(const l in u)l in i||(o[l]=1);for(const l in i)r[l]||(n[l]=i[l],r[l]=1);e[c]=i}else for(const l in u)r[l]=1}for(const u in o)u in n||(n[u]=void 0);return n}function it(e){return typeof e=="object"&&e!==null?e:{}}function W(e){e&&e.c()}function F(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),dt(()=>{const c=e.$$.on_mount.map(Nt).filter(ct);e.$$.on_destroy?e.$$.on_destroy.push(...c):x(c),e.$$.on_mount=[]}),r.forEach(dt)}function U(e,t){const n=e.$$;n.fragment!==null&&(te(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ee(e,t){e.$$.dirty[0]===-1&&(X.push(e),xt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function G(e,t,n,o,r,c,u=null,i=[-1]){const l=K;V(e);const s=e.$$={fragment:null,ctx:[],props:c,update:y,not_equal:r,bound:bt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:bt(),dirty:i,skip_bound:!1,root:t.target||l.$$.root};u&&u(s.root);let a=!1;if(s.ctx=n?n(e,t.props||{},(h,g,...v)=>{const w=v.length?v[0]:g;return s.ctx&&r(s.ctx[h],s.ctx[h]=w)&&(!s.skip_bound&&s.bound[h]&&s.bound[h](w),a&&ee(e,h)),g}):[],s.update(),a=!0,x(s.before_update),s.fragment=o?o(s.ctx):!1,t.target){if(t.hydrate){const h=Jt(t.target);s.fragment&&s.fragment.l(h),h.forEach(k)}else s.fragment&&s.fragment.c();t.intro&&N(e.$$.fragment),F(e,t.target,t.anchor),Mt()}V(l)}class Q{constructor(){ut(this,"$$");ut(this,"$$set")}$destroy(){U(this,1),this.$destroy=y}$on(t,n){if(!ct(n))return y;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!zt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ne="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ne);const M=[];function Xt(e,t){return{subscribe:gt(e,t).subscribe}}function gt(e,t=y){let n;const o=new Set;function r(i){if(z(e,i)&&(e=i,n)){const l=!M.length;for(const s of o)s[1](),M.push(s,e);if(l){for(let s=0;s<M.length;s+=2)M[s][0](M[s+1]);M.length=0}}}function c(i){r(i(e))}function u(i,l=y){const s=[i,l];return o.add(s),o.size===1&&(n=t(r,c)||y),i(e),()=>{o.delete(s),o.size===0&&n&&(n(),n=null)}}return{set:r,update:c,subscribe:u}}function Yt(e,t,n){const o=!Array.isArray(e),r=o?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=t.length<2;return Xt(n,(u,i)=>{let l=!1;const s=[];let a=0,h=y;const g=()=>{if(a)return;h();const w=t(o?s[0]:s,u,i);c?u(w):h=ct(w)?w:y},v=r.map((w,j)=>Tt(w,$=>{s[j]=$,a&=~(1<<j),l&&g()},()=>{a|=1<<j}));return l=!0,g(),function(){x(v),h(),l=!1}})}function oe(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,o,r,c,u=[],i="",l=e.split("/");for(l[0]||l.shift();r=l.shift();)n=r[0],n==="*"?(u.push("wild"),i+="/(.*)"):n===":"?(o=r.indexOf("?",1),c=r.indexOf(".",1),u.push(r.substring(1,~o?o:~c?c:r.length)),i+=~o&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(i+=(~o?"?":"")+"\\"+r.substring(c))):i+="/"+r;return{keys:u,pattern:new RegExp("^"+i+"/?$","i")}}function re(e){let t,n,o;const r=[e[2]];var c=e[0];function u(i,l){let s={};for(let a=0;a<r.length;a+=1)s=ot(s,r[a]);return l!==void 0&&l&4&&(s=ot(s,st(r,[it(i[2])]))),{props:s}}return c&&(t=rt(c,u(e)),t.$on("routeEvent",e[7])),{c(){t&&W(t.$$.fragment),n=ht()},m(i,l){t&&F(t,i,l),S(i,n,l),o=!0},p(i,l){if(l&1&&c!==(c=i[0])){if(t){mt();const s=t;P(s.$$.fragment,1,0,()=>{U(s,1)}),_t()}c?(t=rt(c,u(i,l)),t.$on("routeEvent",i[7]),W(t.$$.fragment),N(t.$$.fragment,1),F(t,n.parentNode,n)):t=null}else if(c){const s=l&4?st(r,[it(i[2])]):{};t.$set(s)}},i(i){o||(t&&N(t.$$.fragment,i),o=!0)},o(i){t&&P(t.$$.fragment,i),o=!1},d(i){i&&k(n),t&&U(t,i)}}}function se(e){let t,n,o;const r=[{params:e[1]},e[2]];var c=e[0];function u(i,l){let s={};for(let a=0;a<r.length;a+=1)s=ot(s,r[a]);return l!==void 0&&l&6&&(s=ot(s,st(r,[l&2&&{params:i[1]},l&4&&it(i[2])]))),{props:s}}return c&&(t=rt(c,u(e)),t.$on("routeEvent",e[6])),{c(){t&&W(t.$$.fragment),n=ht()},m(i,l){t&&F(t,i,l),S(i,n,l),o=!0},p(i,l){if(l&1&&c!==(c=i[0])){if(t){mt();const s=t;P(s.$$.fragment,1,0,()=>{U(s,1)}),_t()}c?(t=rt(c,u(i,l)),t.$on("routeEvent",i[6]),W(t.$$.fragment),N(t.$$.fragment,1),F(t,n.parentNode,n)):t=null}else if(c){const s=l&6?st(r,[l&2&&{params:i[1]},l&4&&it(i[2])]):{};t.$set(s)}},i(i){o||(t&&N(t.$$.fragment,i),o=!0)},o(i){t&&P(t.$$.fragment,i),o=!1},d(i){i&&k(n),t&&U(t,i)}}}function ie(e){let t,n,o,r;const c=[se,re],u=[];function i(l,s){return l[1]?0:1}return t=i(e),n=u[t]=c[t](e),{c(){n.c(),o=ht()},m(l,s){u[t].m(l,s),S(l,o,s),r=!0},p(l,[s]){let a=t;t=i(l),t===a?u[t].p(l,s):(mt(),P(u[a],1,1,()=>{u[a]=null}),_t(),n=u[t],n?n.p(l,s):(n=u[t]=c[t](l),n.c()),N(n,1),n.m(o.parentNode,o))},i(l){r||(N(n),r=!0)},o(l){P(n),r=!1},d(l){l&&k(o),u[t].d(l)}}}function St(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let o="";return n>-1&&(o=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:o}}const wt=Xt(null,function(t){t(St());const n=()=>{t(St())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),ce=Yt(wt,e=>e.location);Yt(wt,e=>e.querystring);const At=gt(void 0);async function q(e){if(!e||e.length<1||e.charAt(0)!="/"&&e.indexOf("#/")!==0)throw Error("Invalid parameter location");await Rt(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(e.charAt(0)=="#"?"":"#")+e}function Bt(e,t){if(t=Lt(t),!e||!e.tagName||e.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return $t(e,t),{update(n){n=Lt(n),$t(e,n)}}}function le(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function $t(e,t){let n=t.href||e.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);e.setAttribute("href",n),e.addEventListener("click",o=>{o.preventDefault(),t.disabled||ue(o.currentTarget.getAttribute("href"))})}function Lt(e){return e&&typeof e=="string"?{href:e}:e||{}}function ue(e){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=e}function ae(e,t,n){let{routes:o={}}=t,{prefix:r=""}=t,{restoreScrollState:c=!1}=t;class u{constructor(d,_){if(!_||typeof _!="function"&&(typeof _!="object"||_._sveltesparouter!==!0))throw Error("Invalid component object");if(!d||typeof d=="string"&&(d.length<1||d.charAt(0)!="/"&&d.charAt(0)!="*")||typeof d=="object"&&!(d instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:L,keys:A}=oe(d);this.path=d,typeof _=="object"&&_._sveltesparouter===!0?(this.component=_.component,this.conditions=_.conditions||[],this.userData=_.userData,this.props=_.props||{}):(this.component=()=>Promise.resolve(_),this.conditions=[],this.props={}),this._pattern=L,this._keys=A}match(d){if(r){if(typeof r=="string")if(d.startsWith(r))d=d.substr(r.length)||"/";else return null;else if(r instanceof RegExp){const C=d.match(r);if(C&&C[0])d=d.substr(C[0].length)||"/";else return null}}const _=this._pattern.exec(d);if(_===null)return null;if(this._keys===!1)return _;const L={};let A=0;for(;A<this._keys.length;){try{L[this._keys[A]]=decodeURIComponent(_[A+1]||"")||null}catch{L[this._keys[A]]=null}A++}return L}async checkConditions(d){for(let _=0;_<this.conditions.length;_++)if(!await this.conditions[_](d))return!1;return!0}}const i=[];o instanceof Map?o.forEach((f,d)=>{i.push(new u(d,f))}):Object.keys(o).forEach(f=>{i.push(new u(f,o[f]))});let l=null,s=null,a={};const h=Qt();async function g(f,d){await Rt(),h(f,d)}let v=null,w=null;c&&(w=f=>{f.state&&(f.state.__svelte_spa_router_scrollY||f.state.__svelte_spa_router_scrollX)?v=f.state:v=null},window.addEventListener("popstate",w),Wt(()=>{le(v)}));let j=null,$=null;const H=wt.subscribe(async f=>{j=f;let d=0;for(;d<i.length;){const _=i[d].match(f.location);if(!_){d++;continue}const L={route:i[d].path,location:f.location,querystring:f.querystring,userData:i[d].userData,params:_&&typeof _=="object"&&Object.keys(_).length?_:null};if(!await i[d].checkConditions(L)){n(0,l=null),$=null,g("conditionsFailed",L);return}g("routeLoading",Object.assign({},L));const A=i[d].component;if($!=A){A.loading?(n(0,l=A.loading),$=A,n(1,s=A.loadingParams),n(2,a={}),g("routeLoaded",Object.assign({},L,{component:l,name:l.name,params:s}))):(n(0,l=null),$=null);const C=await A();if(f!=j)return;n(0,l=C&&C.default||C),$=A}_&&typeof _=="object"&&Object.keys(_).length?n(1,s=_):n(1,s=null),n(2,a=i[d].props),g("routeLoaded",Object.assign({},L,{component:l,name:l.name,params:s})).then(()=>{At.set(s)});return}n(0,l=null),$=null,At.set(void 0)});Gt(()=>{H(),w&&window.removeEventListener("popstate",w)});function Z(f){yt.call(this,e,f)}function E(f){yt.call(this,e,f)}return e.$$set=f=>{"routes"in f&&n(3,o=f.routes),"prefix"in f&&n(4,r=f.prefix),"restoreScrollState"in f&&n(5,c=f.restoreScrollState)},e.$$.update=()=>{e.$$.dirty&32&&(history.scrollRestoration=c?"manual":"auto")},[l,s,a,o,r,c,Z,E]}class fe extends Q{constructor(t){super(),G(this,t,ae,ie,z,{routes:3,prefix:4,restoreScrollState:5})}}const D=gt(!1),Ot=async()=>{try{const e=await fetch("/api/check-auth",{credentials:"include"});if(e.ok){const t=await e.json();return D.set(t.authenticated),t.authenticated}else return D.set(!1),!1}catch(e){return console.error("Auth check error:",e),D.set(!1),!1}},de=async(e,t)=>{try{const n=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t}),credentials:"include"}),o=await n.json();return n.ok&&o.success?(D.set(!0),{success:!0}):{success:!1,message:o.message||"Login failed"}}catch(n){return console.error("Login error:",n),{success:!1,message:"Network error"}}},he=async()=>{try{await fetch("/api/logout",{method:"POST",credentials:"include"}),D.set(!1)}catch(e){console.error("Logout error:",e)}};function Dt(e){let t,n;return{c(){t=m("div"),n=I(e[2]),b(t,"class","error svelte-wnhmat")},m(o,r){S(o,t,r),p(t,n)},p(o,r){r&4&&B(n,o[2])},d(o){o&&k(t)}}}function pe(e){let t,n,o,r,c,u,i,l,s,a,h,g,v,w,j,$,H,Z,E=e[2]&&Dt(e);return{c(){t=m("div"),n=m("h1"),n.textContent="Login",o=O(),r=m("form"),E&&E.c(),c=O(),u=m("div"),i=m("label"),i.textContent="Username",l=O(),s=m("input"),a=O(),h=m("div"),g=m("label"),g.textContent="Password",v=O(),w=m("input"),j=O(),$=m("button"),$.textContent="Login",b(i,"for","username"),b(s,"type","text"),b(s,"id","username"),s.required=!0,b(u,"class","form-group"),b(g,"for","password"),b(w,"type","password"),b(w,"id","password"),w.required=!0,b(h,"class","form-group"),b($,"type","submit"),b(t,"class","login-container svelte-wnhmat")},m(f,d){S(f,t,d),p(t,n),p(t,o),p(t,r),E&&E.m(r,null),p(r,c),p(r,u),p(u,i),p(u,l),p(u,s),tt(s,e[0]),p(r,a),p(r,h),p(h,g),p(h,v),p(h,w),tt(w,e[1]),p(r,j),p(r,$),H||(Z=[et(s,"input",e[5]),et(w,"input",e[6]),et(r,"submit",Vt(e[3]))],H=!0)},p(f,[d]){f[2]?E?E.p(f,d):(E=Dt(f),E.c(),E.m(r,c)):E&&(E.d(1),E=null),d&1&&s.value!==f[0]&&tt(s,f[0]),d&2&&w.value!==f[1]&&tt(w,f[1])},i:y,o:y,d(f){f&&k(t),E&&E.d(),H=!1,x(Z)}}}function me(e,t,n){let o;J(e,D,a=>n(4,o=a));let r="",c="",u="";async function i(){n(2,u="");const a=await de(r,c);a.success?q("/"):n(2,u=a.message||"Login failed")}function l(){r=this.value,n(0,r)}function s(){c=this.value,n(1,c)}return e.$$.update=()=>{e.$$.dirty&16&&o&&q("/")},[r,c,u,i,o,l,s]}class _e extends Q{constructor(t){super(),G(this,t,me,pe,z,{})}}function jt(e,t,n){const o=e.slice();return o[6]=t[n],o}function ge(e){let t,n=Et(e[0]),o=[];for(let r=0;r<n.length;r+=1)o[r]=Ct(jt(e,n,r));return{c(){t=m("ul");for(let r=0;r<o.length;r+=1)o[r].c();b(t,"class","document-list")},m(r,c){S(r,t,c);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(r,c){if(c&1){n=Et(r[0]);let u;for(u=0;u<n.length;u+=1){const i=jt(r,n,u);o[u]?o[u].p(i,c):(o[u]=Ct(i),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}},d(r){r&&k(t),Ht(o,r)}}}function we(e){let t;return{c(){t=m("p"),t.textContent="No documents found."},m(n,o){S(n,t,o)},p:y,d(n){n&&k(t)}}}function be(e){let t,n;return{c(){t=m("p"),n=I(e[2]),b(t,"class","error svelte-1kg1oqe")},m(o,r){S(o,t,r),p(t,n)},p(o,r){r&4&&B(n,o[2])},d(o){o&&k(t)}}}function ye(e){let t;return{c(){t=m("p"),t.textContent="Loading documents..."},m(n,o){S(n,t,o)},p:y,d(n){n&&k(t)}}}function Ct(e){let t,n,o=e[6].title+"",r,c,u,i,l;return{c(){t=m("li"),n=m("a"),r=I(o),u=O(),b(n,"href",c="#/documents/"+e[6].id),b(t,"class","document-item")},m(s,a){S(s,t,a),p(t,n),p(n,r),p(t,u),i||(l=Pt(Bt.call(null,n)),i=!0)},p(s,a){a&1&&o!==(o=s[6].title+"")&&B(r,o),a&1&&c!==(c="#/documents/"+s[6].id)&&b(n,"href",c)},d(s){s&&k(t),i=!1,l()}}}function ke(e){let t,n,o,r,c,u,i,l;function s(g,v){return g[1]?ye:g[2]?be:g[0].length===0?we:ge}let a=s(e),h=a(e);return{c(){t=m("div"),n=m("div"),o=m("h1"),o.textContent="Documents",r=O(),c=m("button"),c.textContent="Logout",u=O(),h.c(),b(n,"class","nav-bar")},m(g,v){S(g,t,v),p(t,n),p(n,o),p(n,r),p(n,c),p(t,u),h.m(t,null),i||(l=et(c,"click",e[3]),i=!0)},p(g,[v]){a===(a=s(g))&&h?h.p(g,v):(h.d(1),h=a(g),h&&(h.c(),h.m(t,null)))},i:y,o:y,d(g){g&&k(t),h.d(),i=!1,l()}}}function ve(e,t,n){let o;J(e,D,s=>n(4,o=s));let r=[],c=!0,u="";async function i(){try{n(1,c=!0);const s=await fetch("/api/documents",{credentials:"include"});s.ok?n(0,r=await s.json()):s.status===401?q("/login"):(console.error("Error fetching documents:",s.status,s.statusText),window.location.pathname==="/"&&!window.location.href.includes("localhost:5173")?(console.log("In static mode, using mock documents"),n(0,r=[{id:1,title:"Static Document 1",content:"This is static document 1 content."},{id:2,title:"Static Document 2",content:"This is static document 2 content."},{id:3,title:"Static Document 3",content:"This is static document 3 content."}])):n(2,u="Failed to fetch documents"))}catch(s){console.error("Document fetch error:",s),window.location.pathname==="/"&&!window.location.href.includes("localhost:5173")?(console.log("In static mode, using mock documents"),n(0,r=[{id:1,title:"Static Document 1",content:"This is static document 1 content."},{id:2,title:"Static Document 2",content:"This is static document 2 content."},{id:3,title:"Static Document 3",content:"This is static document 3 content."}])):n(2,u="Network error")}finally{n(1,c=!1)}}async function l(){await he(),q("/login")}return pt(()=>{o&&i()}),[r,c,u,l]}class It extends Q{constructor(t){super(),G(this,t,ve,ke,z,{})}}function Ee(e){let t,n,o=e[0].title+"",r,c,u,i=e[0].content+"",l;return{c(){t=m("div"),n=m("h1"),r=I(o),c=O(),u=m("div"),l=I(i),b(u,"class","document-content svelte-e2ytv2"),b(t,"class","document-detail svelte-e2ytv2")},m(s,a){S(s,t,a),p(t,n),p(n,r),p(t,c),p(t,u),p(u,l)},p(s,a){a&1&&o!==(o=s[0].title+"")&&B(r,o),a&1&&i!==(i=s[0].content+"")&&B(l,i)},d(s){s&&k(t)}}}function Se(e){let t,n;return{c(){t=m("p"),n=I(e[2]),b(t,"class","error svelte-e2ytv2")},m(o,r){S(o,t,r),p(t,n)},p(o,r){r&4&&B(n,o[2])},d(o){o&&k(t)}}}function Ae(e){let t;return{c(){t=m("p"),t.textContent="Loading document..."},m(n,o){S(n,t,o)},p:y,d(n){n&&k(t)}}}function $e(e){let t,n,o,r,c,u;function i(a,h){if(a[1])return Ae;if(a[2])return Se;if(a[0])return Ee}let l=i(e),s=l&&l(e);return{c(){t=m("div"),n=m("div"),o=m("a"),o.textContent="← Back to Documents",r=O(),s&&s.c(),b(o,"href","#/"),b(n,"class","nav-bar")},m(a,h){S(a,t,h),p(t,n),p(n,o),p(t,r),s&&s.m(t,null),c||(u=Pt(Bt.call(null,o)),c=!0)},p(a,[h]){l===(l=i(a))&&s?s.p(a,h):(s&&s.d(1),s=l&&l(a),s&&(s.c(),s.m(t,null)))},i:y,o:y,d(a){a&&k(t),s&&s.d(),c=!1,u()}}}function Le(e,t,n){let o;J(e,D,s=>n(4,o=s));let{params:r={}}=t,c=null,u=!0,i="";async function l(s){try{n(1,u=!0);const a=await fetch(`/api/documents/${s}`,{credentials:"include"});a.ok?n(0,c=await a.json()):a.status===401?q("/login"):a.status===404?n(2,i="Document not found"):(console.error("Error fetching document:",a.status,a.statusText),window.location.pathname==="/"&&!window.location.href.includes("localhost:5173")?(console.log("In static mode, using mock document"),n(0,c={id:parseInt(s),title:`Static Document ${s}`,content:`This is static document ${s} content. It's used as a fallback when the API isn't available.`})):n(2,i="Failed to fetch document"))}catch(a){console.error("Document fetch error:",a),window.location.pathname==="/"&&!window.location.href.includes("localhost:5173")?(console.log("In static mode, using mock document"),n(0,c={id:parseInt(s),title:`Static Document ${s}`,content:`This is static document ${s} content. It's used as a fallback when the API isn't available.`})):n(2,i="Network error")}finally{n(1,u=!1)}}return pt(()=>{o&&r.id&&l(r.id)}),e.$$set=s=>{"params"in s&&n(3,r=s.params)},[c,u,i,r]}class Oe extends Q{constructor(t){super(),G(this,t,Le,$e,z,{params:3})}}function De(e){let t,n,o;return n=new fe({props:{routes:e[0]}}),{c(){t=m("div"),W(n.$$.fragment),b(t,"class","container")},m(r,c){S(r,t,c),F(n,t,null),o=!0},p:y,i(r){o||(N(n.$$.fragment,r),o=!0)},o(r){P(n.$$.fragment,r),o=!1},d(r){r&&k(t),U(n)}}}function je(e,t,n){let o,r;J(e,ce,u=>n(1,o=u)),J(e,D,u=>n(2,r=u));const c={"/":It,"/documents":It,"/login":_e,"/documents/:id":Oe};return pt(async()=>{if(window.isStaticMode){console.log("App component running in static mode");try{await Ot()}catch(u){console.error("Auth check failed, setting authenticated anyway in static mode:",u),D.set(!0)}}else console.log("App component running in development mode"),await Ot();o===""&&(console.log("Empty location detected, pushing to document list"),q("/")),console.log("Current route at mount:",o)}),e.$$.update=()=>{e.$$.dirty&6&&!r&&o!=="/login"&&o!==""&&o!=="/"&&(console.log("Not authenticated, redirecting to login from",o),q("/login"))},[c,o,r]}class Ce extends Q{constructor(t){super(),G(this,t,je,De,z,{})}}window.isStaticMode=window.location.pathname==="/"&&!window.location.href.includes("localhost:5173");window.isStaticMode?console.log("Application starting in STATIC mode"):console.log("Application starting in DEVELOPMENT mode");new Ce({target:document.getElementById("app")});
